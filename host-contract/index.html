<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>StudyNest Education ç›£è­·æœå‹™åˆç´„</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&family=Dancing+Script:wght@400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Calibri', 'Noto Sans SC', sans-serif;
            line-height: 1.4;
            color: #333;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            font-size: 14px;
        }
        
        .chinese-text, [lang="zh"] {
            font-family: 'Noto Sans SC', 'Microsoft YaHei', 'å¾®è»Ÿé›…é»‘', sans-serif;
        }
        
        .english-text, [lang="en"] {
            font-family: 'Calibri', 'Times New Roman', serif;
        }
        
        .contract-container {
            max-width: 900px;
            margin: 20px auto;
            background: white;
            box-shadow: 0 0 30px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }
        
        .letterhead {
            background: linear-gradient(135deg, #2c5282 0%, #2d3748 50%, #1a365d 100%);
            color: white;
            padding: 20px 40px;
            text-align: center;
            position: relative;
        }
        
        .letterhead::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 20% 80%, rgba(237, 137, 54, 0.1) 0%, transparent 50%),
                        radial-gradient(circle at 80% 20%, rgba(56, 178, 172, 0.1) 0%, transparent 50%);
            opacity: 0.6;
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
            position: relative;
            z-index: 1;
        }
        
        .logo {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #a2a8bd 0%, #8792a8 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            position: relative;
            overflow: hidden;
            flex-shrink: 0;
        }

        .logo::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255,255,255,0.2) 0%, transparent 50%);
            border-radius: 50%;
        }
        
        .nest-logo {
            width: 35px;
            height: 35px;
            position: relative;
        }
        
        /* Create the nest bowl shape */
        .nest-bowl {
            width: 22px;
            height: 12px;
            border: 2px solid #ed8936;
            border-top: none;
            border-radius: 0 0 12px 12px;
            position: absolute;
            bottom: 8px;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .nest-bowl::before {
            content: '';
            position: absolute;
            width: 18px;
            height: 2px;
            background: #ed8936;
            top: -1px;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 1px;
        }
        
        .nest-bowl::after {
            content: '';
            position: absolute;
            width: 12px;
            height: 1px;
            background: #ed8936;
            top: 2px;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 1px;
        }
        
        /* Create the leaf */
        .nest-leaf {
            width: 6px;
            height: 10px;
            background: #38b2ac;
            border-radius: 0 100% 0 100%;
            position: absolute;
            top: 4px;
            left: 50%;
            transform: translateX(-50%) rotate(15deg);
        }
        
        /* Create the book */
        .nest-book {
            width: 18px;
            height: 4px;
            background: #2b6cb0;
            position: absolute;
            bottom: 4px;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 1px;
        }
        
        .nest-book::before {
            content: '';
            position: absolute;
            width: 15px;
            height: 3px;
            background: #3182ce;
            top: -2px;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 1px;
        }
        
        .title-section {
            text-align: left;
            flex-grow: 1;
        }

        .letterhead h1 {
            font-size: 1.8em;
            font-weight: 700;
            margin-bottom: 5px;
            position: relative;
            z-index: 1;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
            letter-spacing: 0.5px;
            color: white;
        }
        
        .letterhead .chinese-title {
            font-size: 1.3em;
            font-weight: 600;
            position: relative;
            z-index: 1;
            margin-bottom: 0;
            color: white;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.4);
        }
        
        .letterhead .contact-info {
            margin-top: 10px;
            font-size: 0.95em;
            opacity: 0.95;
            position: relative;
            z-index: 1;
            font-weight: 400;
            text-align: center;
        }
        
        .contact-info a {
            color: #f6ad55;
            text-decoration: none;
            transition: all 0.3s ease;
        }
        
        .contact-info a:hover {
            color: #ed8936;
            text-shadow: 0 0 8px rgba(237, 137, 54, 0.5);
        }
        
        .contract-content {
            padding: 30px;
        }
        
        .review-date {
            text-align: right;
            margin-bottom: 30px;
            font-style: italic;
            color: #666;
        }
        
        h1, h2, h3 {
            color: #2d3748;
            margin: 20px 0 15px 0;
        }
        
        h1 {
            font-size: 1.6em;
            border-bottom: 3px solid #ed8936;
            padding-bottom: 10px;
        }
        
        h2 {
            font-size: 1.3em;
            color: #2c5282;
        }
        
        h3 {
            font-size: 1.1em;
            color: #2d3748;
        }
        
        .parties-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            border: 2px solid #ddd;
        }
        
        .parties-table td, .parties-table th {
            border: 1px solid #ddd;
            padding: 8px 12px;
            text-align: left;
            vertical-align: middle;
        }
        
        .parties-table th {
            background-color: #f8f9fa;
            font-weight: bold;
        }

        .input-field {
            width: 100%;
            padding: 6px 10px;
            border: 2px solid #e1e5e9;
            border-radius: 6px;
            font-family: inherit;
            font-size: 13px;
            transition: border-color 0.3s ease;
        }
        
        .input-field:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .checkbox-group {
            display: flex;
            align-items: center;
            margin: 8px 0;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 6px;
            transition: background-color 0.3s ease;
            font-size: 13px;
        }
        
        .checkbox-group:hover {
            background: #e9ecef;
        }
        
        .checkbox-group input[type="checkbox"] {
            margin-right: 12px;
            transform: scale(1.2);
            accent-color: #667eea;
        }
        
        .service-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            border: 2px solid #ddd;
            font-size: 12px;
        }
        
        .service-table th, .service-table td {
            border: 1px solid #ddd;
            padding: 6px 8px;
            text-align: left;
            vertical-align: top;
        }
        
        .service-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-align: center;
        }
        
        .service-table .check-mark {
            text-align: center;
            font-size: 1.2em;
            color: #28a745;
        }
        
        .signature-section {
            margin: 40px 0;
            padding: 30px;
            background: #f8f9fa;
            border-radius: 10px;
            border: 2px dashed #667eea;
        }
        
        .signature-pad {
            width: 100%;
            height: 120px;
            border: 2px solid #ddd;
            border-radius: 8px;
            margin: 10px 0;
            background: white;
            cursor: crosshair;
            display: block;
            touch-action: none;
        }
        
        .signature-controls {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-family: inherit;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #545b62;
            transform: translateY(-1px);
        }
        
        .btn-success {
            background: #28a745;
            color: white;
        }
        
        .btn-success:hover {
            background: #218838;
            transform: translateY(-1px);
        }
        
        .final-actions {
            position: sticky;
            bottom: 0;
            background: white;
            padding: 20px;
            border-top: 3px solid #667eea;
            box-shadow: 0 -5px 15px rgba(0,0,0,0.1);
            display: flex;
            justify-content: center;
            gap: 20px;
        }
        
        .medical-form {
            background: #f0f8ff;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid #667eea;
        }
        
        .fees-highlight {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
        }
        
        .validation-error {
            border-color: #dc3545 !important;
            box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.1) !important;
        }
        
        .error-message {
            color: #dc3545;
            font-size: 12px;
            margin-top: 5px;
        }
        
        .signature-status {
            margin-top: 10px;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 12px;
            display: none;
        }

        .signature-status.signed {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
            display: block;
        }

        .signature-status.empty {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
            display: block;
        }
        
        @media print {
            .final-actions {
                display: none;
            }
            
            .contract-container {
                box-shadow: none;
                margin: 0;
            }
            
            body {
                background: white;
            }
        }
        
        .elegant-signature {
            font-family: 'Dancing Script', cursive;
            font-size: 2.2em;
            font-weight: 600;
            color: #2c5282;
            text-align: center;
            margin: 10px 0;
            transform: rotate(-2deg);
        }
        
        .chinese-text {
            font-family: 'Noto Sans SC', sans-serif;
            font-weight: 400;
        }
</style>
</head>
<body>
<div class="contract-container">
<div class="letterhead">
<div class="logo-container">
<div class="logo" style="width: 100px; height: 100px; background: rgba(255, 255, 255, 0.5);">
<img alt="StudyNest Education Logo" src="StudyNest Education.png" style="width: 65px; height: 65px; object-fit: contain;"/>
</div>
<div class="title-section">
<h1>StudyNest Education</h1>
</div>
</div>
</div>
<div class="contract-content">
<div class="review-date">
<strong>Review Dateï¼šAugust 2025</strong>
</div>
<h1 style="text-align: center;">Short-Term Host Family Agreement</h1>
<h2>Agreement Parties</h2>
<table class="parties-table">
<tr>
<th style="width: 20%;">
<div style="font-size: 0.9em; line-height: 1.3;">
<div><strong>Party A:</strong></div>
</div>
</th>
<td style="width: 40%;">
<input class="input-field" id="parentName" placeholder="Host Family Representative" required="" type="text"/>
</td>
<td style="width: 40%; font-size: 0.85em; line-height: 1.4;">
<div>(hereinafter referred to as <strong>the Host</strong>)</div>
</td>
</tr>
<tr>
<td style="font-size: 0.9em; line-height: 1.3;">
<div><strong>Address:</strong></div>
</td>
<td colspan="2">
<textarea class="input-field" id="parentAddress" placeholder="Please enter full address" required="" rows="3"></textarea>
</td>
</tr>
<tr>
<th style="font-size: 0.9em; line-height: 1.3;">
<div><strong>Party B:</strong></div>
</th>
<td><strong>StudyNest Education Limited</strong></td>
<td style="font-size: 0.85em; line-height: 1.4;">
<div>(hereinafter referred to as <strong>StudyNest</strong> or <strong>the Company</strong>)</div>
</td>
</tr>
<tr>
<td style="font-size: 0.9em; line-height: 1.3;">
<div><strong>Address:</strong></div>
</td>
<td colspan="2"><strong>1 Boleyn Way, Barnet, EN5 5LH</strong></td>
</tr>
<tr>
<td style="font-size: 0.9em; line-height: 1.3;">
<div><strong>Contract No.:</strong></div>
</td>
<td colspan="2">
<input class="input-field" id="contractNumberInput" placeholder="Contract number will be auto-generated" readonly="" style="background-color: #f8f9fa; color: #6c757d;" type="text"/>
</td>
</tr>
<tr>
<td style="font-size: 0.9em; line-height: 1.3;">
<div><strong>Date of Signing:</strong></div>
</td>
<td colspan="2">
<input class="input-field" id="signingDate" readonly="" required="" type="date"/>
</td>
</tr>
</table>
<p>By signing this Agreement, both parties agree to abide by the following terms and conditions, including the appended Host Family Responsibilities and Legal Provisions.</p>

<h2>Purpose and Scope</h2>
<div style="padding-left: 20px;">
<p>This Agreement governs the provision of short-term accommodation to students under the care of StudyNest Education Ltd. Placements may include weekends, half-terms, exeats, or emergency situations.</span></p>
<p>The primary aim is to ensure:</span></p>
        <ul style="margin-left: 40px;">
<li>Student welfare and safeguarding at all times</span></li>
<li>A safe, clean, and appropriate hosting environment</span></li>
<li>Clarity regarding responsibilities, expectations, and conduct</span></li>
</div>

<h2>Booking Process</h2>
<div style="padding-left: 20px;">
<p>All placements are coordinated exclusively by StudyNest Education Ltd.</span></p>
<p>Hosts will be contacted with student details, stay dates, and special requirements.</span></p>
<p>Hosts must respond to confirm availability within 24 hours.</span></p>
<p>The Company reserves the right to reallocate students if timely confirmation is not received.</span></p>
</ul>
</div>

<h2>Host Responsibilities</h2>
<div style="padding-left: 20px;">
<p>The Host Family agrees to:</span></p>
<p><strong>a) </strong> Provide a clean, safe home environment with appropriate facilities</span></p>
<p><strong>b) </strong> Offer a private bedroom (not shared with any family member)</span></p>
<p><strong>c) </strong> Supply three daily meals unless otherwise agreed</span></p>
<p><strong>d) </strong> Supervise the student appropriately and ensure they are never left overnight without an adult</span></p>
<p><strong>e) </strong> Maintain open communication with the Company and promptly report any issues or concerns</span></p>
<p>Students must not:</span></p>
<p><strong>a) </strong> Stay overnight elsewhere without prior written approval from the Company</span></p>
<p><strong>b) </strong> Be left unsupervised overnight under any circumstance</span></p>
<p>If a key is not provided, a responsible adult must be present to allow entry at expected times.</span></p>
</ul>
</div>

<h2>Host Responsibilities</h2>
<div style="padding-left: 20px;">
<p>All residents aged 16+ must undergo enhanced DBS checks.</span></p>
<p>The Host agrees to comply with the Companyâ€™s safeguarding policy at all times.</span></p>
<p>Any safeguarding concern must be reported immediately to the Company.</span></p>
<p><strong>Safeguarding Contacts:<strong></span></p>
<p> DSL: Jessie Chang info@studynest.uk </span></p>
</ul>
</div>

<h2>Payments</h2>
<div style="padding-left: 20px;">
<p>Hosts will be paid the agreed nightly rate by bank transfer within 7 working days following the end of the placement.</span></p>
<p>The Company is not liable for reimbursement of incidental expenses (e.g., transportation, entertainment, personal items).</span></p>
</ul>
</div>   

<h2>Cancellations</h2>
<div style="padding-left: 20px;">
<p>If StudyNest cancels a confirmed booking within one week (7 days) prior to the scheduled arrival date, a goodwill cancellation fee of Â£50 per week of the confirmed booking will be paid to the Host, up to a maximum of Â£100.</span></p>
<p>No cancellation fee will be payable if cancellation is made more than one week prior to the scheduled arrival.</span></p>
<p>Repeated or unreasonably late cancellations by the Host may result in temporary suspension or removal from the approved host list, at the discretion of StudyNest Education.</span></p>
</ul>
</div>   

<h2>Private Arrangements</h2>
<div style="padding-left: 20px;">
<p>Hosts may not enter into direct or private agreements with students or their families.</span></p>
<p>All placements must be made through StudyNest Education Ltd.</span></p>
<p>Breach of this clause will result in immediate termination and potential legal action.</span></p>
</ul>
</div>   

<h2>Termination</h2>
<div style="padding-left: 20px;">
<p>Either party may terminate this Agreement with 14 days' written notice.</span></p>
<p>The Company reserves the right to terminate the agreement immediately in the event of any safeguarding concern, misconduct, or breach of contract.</span></p>
</ul>
</div>   

<h2>Host Family Responsibilities</h2>
<div style="padding-left: 20px;">
<p>The Host must:</span></p>
<p><strong>1. </strong> Submit enhanced DBS checks (covered by the Company)</span></p>
<p><strong>2. </strong> Subscribe to the DBS Update Service and maintain validity</span></p>
<p><strong>3. </strong> Complete annual safeguarding training (online)</span></p>
<p><strong>4. </strong> Submit a signed medical declaration</span></p>
<p><strong>5. </strong> Provide two character references (one professional)</span></p>
<p><strong>6. </strong> Cooperate with inspections by the Company, AEGIS, or other relevant authorities</span></p>
<p><strong>7. </strong> Provide:</span></p>
        <li>Private bed and study space</span></li>
        <li>Clean linens and towels weekly</span></li>
        <li>Heating, lighting, bathroom access</span></li>
        <li>Three meals daily and appropriate supervision</span></li>
<p><strong>8. </strong> Notify the Company of any changes to household members or conditions</span></p>
<p><strong>9. </strong> Refrain from making any private hosting arrangements with students or families</span></p>
<p><strong>10. </strong> Maintain emergency contact communication and assist students if needed</span></p>
</ul>
</div>

<h2>Legal Provisions</h2>
<div style="padding-left: 20px;">
<p><strong>Indemnity<strong></span></p>
<p>The Host agrees to indemnify StudyNest Education Ltd from all liabilities resulting from negligence, misconduct, or breach of contract.</span></p>
<p><strong>Insurance<strong></span></p>
<p>The Host must maintain appropriate home insurance including third-party liability.</span></p>
<p><strong>Confidentiality & Data Protection<strong></span></p>
<p>All student and Company information must be treated as confidential under GDPR and UK Data Protection Act 2018.</span></p>
<p><strong>Jurisdiction<strong></span></p>
<p>This Agreement is governed by the laws of England and Wales.</span></p>
<p><strong>Enforcement<strong></span></p>
<p>The attached job description and legal provisions form part of this binding agreement.</span></p>
</ul>
</div> 
        
<h2>Payment Information</h2>
<p>To ensure prompt and accurate payment following any short-term hosting arrangement, please provide your bank details below. This information will be used solely for the purpose of transferring agreed fees for completed placements.</p>

<h3>Bank Details</h3>
<table class="parties-table">
  <tr>
    <td style="width: 30%;"><strong>Account Name</strong></td>
    <td style="width: 30%;"><strong>Contact Number</strong></td>
  </tr>
  <tr>
    <td style="width: 30%;"><strong>Sort Code</strong></td>
    <td style="width: 30%;"><strong>Account Number</strong></td>
  </tr>
</table>
        
<h3>Family Contact Details å®¶é•·è¯çµ¡è³‡æ–™</h3>
<table class="parties-table">
<tr>
<td style="width: 25%;"></td>
<td style="width: 37.5%; text-align: center;"><strong>Mother æ¯è¦ªè³‡æ–™</strong></td>
<td style="width: 37.5%; text-align: center;"><strong>Father çˆ¶è¦ªè³‡æ–™</strong></td>
</tr>
<tr>
<td><strong>Name å§“å</strong></td>
<td><input class="input-field" id="motherName" placeholder="æ¯è¦ªå§“å" type="text"/></td>
<td><input class="input-field" id="fatherName" placeholder="çˆ¶è¦ªå§“å" type="text"/></td>
</tr>
<tr>
<td><strong>Occupation è·æ¥­</strong></td>
<td><input class="input-field" id="motherOccupation" placeholder="æ¯è¦ªè·æ¥­" type="text"/></td>
<td><input class="input-field" id="fatherOccupation" placeholder="çˆ¶è¦ªè·æ¥­" type="text"/></td>
</tr>
<tr>
<td><strong>Mobile No. æ‰‹æ©Ÿè™Ÿç¢¼</strong></td>
<td><input class="input-field" id="motherMobile" placeholder="æ¯è¦ªæ‰‹æ©Ÿè™Ÿç¢¼" type="tel"/></td>
<td><input class="input-field" id="fatherMobile" placeholder="çˆ¶è¦ªæ‰‹æ©Ÿè™Ÿç¢¼" type="tel"/></td>
</tr>
<tr>
<td><strong>Email Address éƒµç®±</strong></td>
<td><input class="input-field" id="motherEmail" placeholder="æ¯è¦ªéƒµç®±" type="email"/></td>
<td><input class="input-field" id="fatherEmail" placeholder="çˆ¶è¦ªéƒµç®±" type="email"/></td>
</tr>
<tr>
<td><strong>Home Address<br/>å®¶åº­åœ°å€</strong></td>
<td colspan="2"><textarea class="input-field" id="homeAddress" placeholder="å®Œæ•´å®¶åº­åœ°å€ Complete Home Address" rows="2"></textarea></td>
</tr>
</table>

<h3>è«‹å‹¾é¸æ‰€éœ€ç›£è­·æ–¹æ¡ˆ Please tick your selected guardianship plan</h3>
<div class="checkbox-group">
<input id="corePlan" name="guardianshipPlan" type="radio" value="core"/>
<label for="corePlan">æ ¸å¿ƒç›£è­·æ–¹æ¡ˆ Core Guardianship Plan</label>
</div>
<div class="checkbox-group">
<input id="comprehensivePlan" name="guardianshipPlan" type="radio" value="comprehensive"/>
<label for="comprehensivePlan">å…¨é¢ç›£è­·æ–¹æ¡ˆ Comprehensive Guardianship Plan</label>
</div>
<h2>Appendix A. Service Details ç›£è­·æ–¹æ¡ˆä»‹ç´¹</h2>
<p>Below are the two carefully designed guardianship plans offered by SchoolsGroup to meet the diverse needs of families and students, providing professional and comprehensive support and protection. Please select the plan that best suits your requirements.</p>
<p class="chinese-text">ä»¥ä¸‹ç‚ºè‹±å€«å­¸å±…ç‚ºæ‚¨ç²¾å¿ƒè¨­è¨ˆçš„å…©æ¬¾ç›£è­·æ–¹æ¡ˆï¼Œæ—¨åœ¨æ»¿è¶³ä¸åŒå®¶åº­å’Œå­¸ç”Ÿçš„éœ€æ±‚ï¼Œæä¾›å°ˆæ¥­å…¨é¢çš„æ”¯æŒå’Œä¿éšœã€‚è«‹æ ¹æ“šæ‚¨çš„éœ€æ±‚é¸æ“‡æœ€åˆé©çš„æ–¹æ¡ˆã€‚</p>
<table class="service-table">
<thead>
<tr>
<th style="width: 60%;">æœå‹™é …ç›® / Services</th>
<th style="width: 20%;">Core æ ¸å¿ƒæ–¹æ¡ˆ</th>
<th style="width: 20%;">Comprehensive å…¨é¢æ–¹æ¡ˆ</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="3" style="background-color: #f0f8ff; font-weight: bold; text-align: center;">ğŸ›« æŠµè‹±å‰æœå‹™ Pre-arrival Services</td>
</tr>
<tr>
<td>Provide guardian contact to school æä¾›ç›£è­·äººè¯çµ¡è¨Šæ¯çµ¦å­¸æ ¡</td>
<td class="check-mark">âœ”ï¸</td>
<td class="check-mark">âœ”ï¸</td>
</tr>
<tr>
<td>Liaise with designated school contact èˆ‡å­¸æ ¡æŒ‡å®šè¯çµ¡äººå¯¦éš›æºé€šèˆ‡ä¿¡æ¯å‚³é</td>
<td class="check-mark">---</td>
<td class="check-mark">âœ”ï¸</td>
</tr>
<tr>
<td>Emergency contact setup &amp; procedures å®‰æ’ç›£è­·äººç·Šæ€¥è¯çµ¡æ–¹å¼èˆ‡æ‡‰è®Šæµç¨‹èªªæ˜</td>
<td class="check-mark">âœ”ï¸</td>
<td class="check-mark">âœ”ï¸</td>
</tr>
<tr>
<td>Visa &amp; official document support ç°½è­‰åŠå®˜æ–¹æ–‡ä»¶ç°½ç½²å”åŠ©</td>
<td class="check-mark">âœ”ï¸</td>
<td class="check-mark">âœ”ï¸</td>
</tr>
<tr>
<td>Pre-departure briefing è¡Œå‰æŒ‡å°æœå‹™ï¼Œå”åŠ©å­¸ç”Ÿèˆ‡å®¶é•·äº†è§£è‹±åœ‹ç”Ÿæ´»å¯¦å‹™</td>
<td class="check-mark">---</td>
<td class="check-mark">âœ”ï¸</td>
</tr>
<tr>
<td colspan="3" style="background-color: #f0f8ff; font-weight: bold; text-align: center;">ğŸ« æŠµè‹±å¾Œ &amp; å­¸æœŸä¸­æœå‹™ Term-time UK Services</td>
</tr>
<tr>
<td>24/7 emergency support é›™èªç·Šæ€¥é›»è©±æ”¯æ´ï¼ˆä¸­è‹±é›™èªï¼‰</td>
<td class="check-mark">âœ”ï¸</td>
<td class="check-mark">âœ”ï¸</td>
</tr>
<tr>
<td>Emergency coordination (at parents' expense) ç·Šæ€¥äº‹ä»¶æ‡‰è®Šï¼ˆè¡ç”Ÿè²»ç”¨ç”±å®¶é•·æ‰¿æ“”ï¼‰</td>
<td class="check-mark">âœ”ï¸</td>
<td class="check-mark">âœ”ï¸</td>
</tr>
<tr>
<td>Assist with student finances å”åŠ©å®¶é•·ç®¡ç†å­¸ç”Ÿè²¡å‹™ï¼Œå¦‚å®šæœŸé›¶ç”¨é‡‘è½‰å¸³å®‰æ’</td>
<td class="check-mark">âœ”ï¸</td>
<td class="check-mark">âœ”ï¸</td>
</tr>
<tr>

<td>UK bank account support å”åŠ©å­¸ç”Ÿé–‹è¨­è‹±åœ‹éŠ€è¡Œå¸³æˆ¶</td>
<td class="check-mark">---</td>
<td class="check-mark">âœ”ï¸</td>
</tr>
<tr>
<td>Holiday homestay &amp; transport arrangement å”åŠ©å®‰æ’å‡æœŸå¯„å®¿å®¶åº­åŠäº¤é€šæ¥é€</td>
<td class="check-mark">---</td>
<td class="check-mark">âœ”ï¸</td>
</tr>
<tr>
<td>Medical support &amp; interpretation ç›£è­·äººé™ªåŒå°±é†«èˆ‡èªè¨€å”åŠ©</td>
<td class="check-mark">---</td>
<td class="check-mark">âœ”ï¸</td>
</tr>
<tr>
<td>School/homestay visit on request æ ¹æ“šéœ€æ±‚å®‰æ’å­¸æ ¡æˆ–å¯„å®¿å®¶åº­æ‹œè¨ª</td>
<td class="check-mark">---</td>
<td class="check-mark">âœ”ï¸</td>
</tr>
<tr>
<td>Termly online consultations æ¯å­¸æœŸèˆ‡å­¸ç”ŸåŠå®¶é•·é€²è¡Œä¸€æ¬¡ç·šä¸Šæœƒè«‡</td>
<td class="check-mark">---</td>
<td class="check-mark">âœ”ï¸</td>
</tr>
<tr>
<td>Academic support coordination å­¸è¡“æ”¯æŒï¼ˆé¸èª²è«®è©¢ã€èª²å¤–æ´»å‹•å®‰æ’ã€å®¶æ•™å®‰æ’ï¼‰</td>
<td class="check-mark">---</td>
<td class="check-mark">âœ”ï¸</td>
</tr>
<tr>
<td>University &amp; UCAS guidance å‡å­¸è«®è©¢æœå‹™ï¼ˆåŒ…æ‹¬UCASæŒ‡å°ã€å¤§å­¸ç”³è«‹ï¼‰</td>
<td class="check-mark">---</td>
<td class="check-mark">âœ”ï¸</td>
</tr>
<tr>
<td>Attend parent's meeting with report ç›£è­·äººä»£å®¶é•·åƒåŠ å®¶é•·æœƒä¸¦æä¾›å ±å‘Š</td>
<td class="check-mark">---</td>
<td class="check-mark">âœ”ï¸</td>
</tr>
<tr>
<td>Act as official school contact ä½œç‚ºå­¸ç”Ÿæ­£å¼æ ¡æ–¹è¯çµ¡äººï¼Œç¢ºä¿é‡è¦è¨Šæ¯ä¸éºæ¼</td>
<td class="check-mark">---</td>
<td class="check-mark">âœ”ï¸</td>
</tr>
</tbody>
</table>
<div class="fees-highlight">
<h3 style="color: white !important; font-size: 1.5em; margin-bottom: 15px; font-weight: 700;">Fees and Charges è²»ç”¨èˆ‡æ”¶è²»</h3>
<p><strong>Core Guardianship Plan æ ¸å¿ƒç›£è­·æ–¹æ¡ˆï¼šÂ£1,047 per year æ¯å¹´ï¼ˆÂ£349 x 3å­¸æœŸï¼‰</strong></p>
<p><strong>Comprehensive Guardianship Plan å…¨é¢ç›£è­·æ–¹æ¡ˆï¼šÂ£2,697 per year æ¯å¹´ï¼ˆÂ£899 x 3å­¸æœŸï¼‰</strong></p>
<p>The guardianship fees are charged on an annual basis and cover the full academic year,<br/><span style="display: block; text-align: center; margin-top: 5px;">including all three school terms.</span></p>
<p class="chinese-text">ç›£è­·è²»ä»¥å¹´åº¦è¨ˆç®—ï¼Œæ¶µè“‹æ•´å€‹å­¸å¹´ï¼ˆä¸‰å­¸æœŸï¼‰çš„æ‰€æœ‰æœå‹™ã€‚</p>
</div>
<div style="background: #f7fafc; padding: 20px; border-radius: 10px; margin: 20px 0; border-left: 5px solid #ed8936; border-top: 1px solid #e2e8f0;">
<h4 style="color: #2d3748;">Third-Party Expenses ç¬¬ä¸‰æ–¹è²»ç”¨èªªæ˜</h4>
<p>All other third-party expenses directly incurred are excluded from the guardianship fees and remain the sole responsibility of the Parents, including but not limited to:</p>
<p class="chinese-text">æ‰€æœ‰å…¶ä»–ç”±ç¬¬ä¸‰æ–¹ç›´æ¥ç”¢ç”Ÿçš„è²»ç”¨ä¸åŒ…å«æ–¼ç›£è­·è²»ä¸­ï¼Œå‡ç”±å®¶é•·è‡ªè¡Œè² æ“”ï¼ŒåŒ…å«ä½†ä¸é™æ–¼ï¼š</p>
<ul style="margin: 15px 0; padding-left: 25px;">
<li>Third-party service fees and expenses arising from emergency situations (e.g., medical costs, passport reissuance)<br/><span class="chinese-text">ç·Šæ€¥äº‹ä»¶ç”¢ç”Ÿçš„ç¬¬ä¸‰æ–¹æœå‹™è²»ç”¨åŠç›¸é—œæ”¯å‡ºï¼ˆå¦‚é†«ç™‚è²»ç”¨ã€è­·ç…§è£œè¾¦ç­‰ï¼‰</span></li>
<li>Holiday homestay accommodation and transportation fees<br/><span class="chinese-text">å‡æœŸå¯„å®¿å®¶åº­å®‰æ’åŠäº¤é€šæ¥é€è²»ç”¨</span></li>
<li>Costs incurred by guardians accompanying the student for medical treatment<br/><span class="chinese-text">ç›£è­·äººé™ªåŒå°±é†«æ‰€ç”¢ç”Ÿçš„è²»ç”¨</span></li>
<li>Fees for on-demand tutoring and academic consultation services<br/><span class="chinese-text">æŒ‰éœ€æä¾›ä¹‹å®¶æ•™åŠå­¸è¡“è«®è©¢æœå‹™è²»ç”¨</span></li>
<li>Other third-party service fees<br/><span class="chinese-text">å…¶ä»–ç¬¬ä¸‰æ–¹æœå‹™è²»ç”¨</span></li>
</ul>

<p><strong>Additional Expense Arrangement å„²å‚™é‡‘å®‰æ’ï¼š</strong></p>
<p>In addition to the termly guardianship fees, a deposit of Â£1,000 will be collected at the start of the agreement as the student's allowance reserve fund, which will be held and managed by StudyNest for the purpose of covering necessary incidental expenses (e.g. purchase of personal items, emergency needs, transport bookings, etc.). Expenses under Â£50 will be deducted directly from the student's allowance account. Expenses exceeding Â£50 will require prior notification and consent from the Parents before payment. When the balance falls below Â£300, Parents will be notified to top up the fund.</p>
<p class="chinese-text">é™¤æ¯å­¸æœŸä¹‹ç›£è­·æœå‹™è²»å¤–ï¼Œè‹±å€«å­¸å±…å°‡æ–¼é¦–å¹´ç°½ç´„æ™‚æ”¶å– Â£1,000 è‹±éŠ ä½œç‚ºå­¸ç”Ÿä¹‹å„²å‚™é›¶ç”¨é‡‘ï¼Œç”±æœ¬å…¬å¸å¦¥å–„ä¿ç®¡ä¸¦ç”¨æ–¼å­¸ç”Ÿåœ¨è‹±æœŸé–“å¿…è¦çš„è‡¨æ™‚æ”¯å‡ºï¼ˆå¦‚è³¼è²·ç”Ÿæ´»ç”¨å“ã€ç·Šæ€¥æ‡‰è®Šã€äº¤é€šé è¨‚ç­‰ï¼‰ã€‚å°æ–¼é‡‘é¡ä½æ–¼ Â£50 è‹±éŠ çš„ç¬¬ä¸‰æ–¹è²»ç”¨ï¼Œå°‡ç›´æ¥å¾å­¸ç”Ÿé›¶ç”¨é‡‘å¸³æˆ¶æ‰£é™¤ï¼›é‡‘é¡è¶…é Â£50 è‹±éŠ çš„æ”¯å‡ºï¼Œéœ€äº‹å…ˆé€šçŸ¥ä¸¦ç²å¾—å®¶é•·æ›¸é¢åŒæ„å¾Œæ–¹å¯æ”¯ä»˜ã€‚ç•¶é¤˜é¡ä½æ–¼ Â£300 è‹±éŠ æ™‚ï¼Œæˆ‘å€‘å°‡ä¸»å‹•é€šçŸ¥å®¶é•·é€²è¡Œå„²å€¼è£œå……ã€‚</p>

        <p><strong>Payment Security ä»˜æ¬¾å®‰å…¨ï¼š</strong></p>
<p>All payments must be made strictly in accordance with the invoices issued by StudyNest on official company letterhead. To prevent fraud, StudyNest only accepts payments made upon receipt of a valid invoice issued on official company letterhead. Payments made outside of this procedure are not recognized as valid, but parents remain obligated to fulfill all payment responsibilities under the agreement.</p>
<p class="chinese-text">æ‰€æœ‰æ¬¾é …é ˆä¾æ“šç”±è‹±å€«å­¸å±…ä»¥æ­£å¼å…¬å¸ä¿¡ç´™é–‹ç«‹çš„ç™¼ç¥¨é€²è¡Œæ”¯ä»˜ã€‚ç‚ºé˜²ç¯„è©é¨™ï¼Œè‹±å€«å­¸å±…åƒ…æ¥å—åœ¨æ”¶åˆ°æ­£å¼ä¸”æœ‰æ•ˆç™¼ç¥¨å¾Œï¼Œä¾ç…§ç™¼ç¥¨æŒ‡ç¤ºé€²è¡Œçš„ä»˜æ¬¾ã€‚è‹¥æœªä¾æ­¤ç¨‹åºä»˜æ¬¾ï¼Œè‹±å€«å­¸å±…ä»ä¿ç•™è¿½è¨æ‡‰ä»˜æ¬¾é …çš„æ¬Šåˆ©ã€‚</p>
</div>
<h2>Appendix B: Student Health &amp; Medical Consent å­¸ç”Ÿå¥åº·è³‡è¨Šèˆ‡é†«ç™‚æˆæ¬Š</h2>
<div class="medical-form">
<p>To support your child's health and safety during their studies in the UK, we need accurate information about their physical and mental well-being. This form helps the school and guardianship company provide appropriate care and support.</p>
<p class="chinese-text">ç‚ºäº†ä¿éšœæ‚¨å­©å­åœ¨è‹±åœ‹æ±‚å­¸æœŸé–“çš„å¥åº·èˆ‡å®‰å…¨ï¼Œæˆ‘å€‘éœ€è¦æ‚¨æä¾›æº–ç¢ºçš„èº«å¿ƒå¥åº·è³‡è¨Šã€‚æœ¬è¡¨æ ¼å°‡å”åŠ©å­¸æ ¡èˆ‡ç›£è­·æ©Ÿæ§‹æä¾›åˆé©çš„ç…§è­·èˆ‡æ”¯æŒã€‚</p>
<table class="parties-table">
<tr>

<td style="width: 25%;"><strong>Full Name / å…¨å</strong></td>
<td style="width: 75%;"><input class="input-field" id="medicalName" placeholder="å­¸ç”Ÿå…¨å" type="text"/></td>
</tr>
<tr>
<td><strong>Date of Birth / å‡ºç”Ÿæ—¥æœŸ</strong></td>
<td><input class="input-field" id="medicalDOB" type="date"/></td>
</tr>
<tr>
<td><strong>Blood Type / è¡€å‹</strong></td>
<td><input class="input-field" id="bloodType" placeholder="è¡€å‹ (å¦‚ï¼šA+, B-, O+ç­‰)" type="text"/></td>
</tr>
<tr>
<td style="vertical-align: top;"><strong>General Health<br/>ä¸€èˆ¬å¥åº·ç‹€æ³</strong><br/><small>Please describe any existing health issues or concerns.<br/></small></td>
<td><textarea class="input-field" id="generalHealth" placeholder="è«‹è©³ç´°æè¿°å­¸ç”Ÿçš„ä¸€èˆ¬å¥åº·ç‹€æ³ï¼ŒåŒ…æ‹¬ä»»ä½•æ…¢æ€§ç–¾ç—…ã€æ­£åœ¨æœç”¨çš„è—¥ç‰©ã€æˆ–éœ€è¦ç‰¹åˆ¥æ³¨æ„çš„å¥åº·å•é¡Œ..." rows="3"></textarea></td>
</tr>
<tr>
<td style="vertical-align: top;"><strong>Allergies<br/>éæ•ç‹€æ³</strong><br/><small>Please list any allergies.<br/></small></td>
<td><textarea class="input-field" id="allergies" placeholder="è«‹è©³ç´°åˆ—å‡ºæ‰€æœ‰éæ•æºï¼ŒåŒ…æ‹¬é£Ÿç‰©éæ•ã€è—¥ç‰©éæ•ã€ç’°å¢ƒéæ•ï¼ˆå¦‚èŠ±ç²‰ã€å¡µèŸï¼‰ã€å‹•ç‰©éæ•ç­‰..." rows="3"></textarea></td>
</tr>
<tr>
<td style="vertical-align: top;"><strong>Last Medical Checkup<br/>æœ€è¿‘ä¸€æ¬¡é«”æª¢æ™‚é–“</strong><br/><small>Date and doctor's contact if applicable.<br/></small></td>
<td><textarea class="input-field" id="lastCheckup" placeholder="æœ€è¿‘é«”æª¢æ—¥æœŸåŠé†«ç”Ÿè¯çµ¡æ–¹å¼ï¼ˆä¾‹ï¼š2024å¹´6æœˆ15æ—¥ï¼ŒDr. Smith, Tel: +44...ï¼‰" rows="2"></textarea></td>
</tr>
<tr>
<td><strong>Dental Care Needed?<br/>æ˜¯å¦éœ€è¦ç‰™ç§‘ç…§è­·ï¼Ÿ</strong></td>
<td>
<label style="margin-right: 15px;"><input name="dentalCare" style="margin-right: 8px;" type="radio" value="yes"/> Yes æ˜¯</label>
<label><input name="dentalCare" style="margin-right: 8px;" type="radio" value="no"/> No å¦</label>
</td>
</tr>
<tr>
<td><strong>Chronic Conditions<br/>æ…¢æ€§ç—…æˆ–ç‰¹æ®Šå¥åº·ç‹€æ³</strong></td>
<td>
<label style="margin-right: 15px;"><input name="chronicConditions" style="margin-right: 8px;" type="radio" value="yes"/> Yes æ˜¯</label>
<label><input name="chronicConditions" style="margin-right: 8px;" type="radio" value="no"/> No å¦</label>
</td>
</tr>
<tr>
<td style="vertical-align: top;">If yes, please specify: <span class="chinese-text">å¦‚æ˜¯ï¼Œè«‹èªªæ˜ï¼š</span></td>
<td><textarea class="input-field" id="chronicDetails" placeholder="è«‹è©³ç´°èªªæ˜ä»»ä½•æ…¢æ€§ç–¾ç—…æˆ–ç‰¹æ®Šå¥åº·ç‹€æ³ï¼ŒåŒ…æ‹¬è¨ºæ–·æ—¥æœŸã€æ²»ç™‚æ–¹æ³•ã€æœç”¨è—¥ç‰©ç­‰..." rows="2"></textarea></td>
</tr>
<tr>
<td><strong>Learning Difficulties<br/>å­¸ç¿’éšœç¤™</strong></td>
<td>
<label style="margin-right: 15px;"><input name="learningDifficulties" style="margin-right: 8px;" type="radio" value="yes"/> Yes æ˜¯</label>
<label><input name="learningDifficulties" style="margin-right: 8px;" type="radio" value="no"/> No å¦</label>
</td>
</tr>
<tr>
<td style="vertical-align: top;">If yes, please specify: <span class="chinese-text">å¦‚æ˜¯ï¼Œè«‹èªªæ˜</span></td>
<td><textarea class="input-field" id="learningDetails" placeholder="è«‹è©³ç´°èªªæ˜å­¸ç¿’éšœç¤™é¡å‹ã€è¨ºæ–·æƒ…æ³ã€æ‰€éœ€æ”¯æ´ç­‰..." rows="2"></textarea></td>
</tr>
<tr>

<td style="vertical-align: top;"><strong>Additional Information<br/>å…¶ä»–é‡è¦å¥åº·è³‡è¨Š</strong></td>
<td><textarea class="input-field" id="additionalInfo" placeholder="è«‹æä¾›ä»»ä½•å…¶ä»–é‡è¦çš„å¥åº·è³‡è¨Šï¼ŒåŒ…æ‹¬å¿ƒç†å¥åº·ç‹€æ³ã€ç‰¹æ®Šéœ€æ±‚ã€ç·Šæ€¥è¯çµ¡äººè³‡è¨Šç­‰..." rows="3"></textarea></td>
</tr>
</table>
<h4>Vaccination Record ç–«è‹—æ¥ç¨®ç´€éŒ„</h4>
<p>Please provide date for each vaccine your child has received. <span class="chinese-text">è«‹å¡«å¯«å­©å­å·²æ¥ç¨®ç–«è‹—çš„æ—¥æœŸã€‚</span></p>
<table class="parties-table">
<tr>
<th>Vaccine ç–«è‹—</th>
<th>Date æ—¥æœŸ</th>
</tr>
<tr>
<td>DTaP/IPV/Hib (Diphtheria, Tetanus, Pertussis, Polio, Hib)<br/><span class="chinese-text">ç™½å–‰ã€ç ´å‚·é¢¨ã€ç™¾æ—¥å’³ã€è„Šé«“ç°è³ªç‚ã€Bå‹æµæ„Ÿå—œè¡€æ¡¿èŒ</span></td>
<td><input class="input-field" id="vaccine1" type="date"/></td>
</tr>
<tr>
<td>MMR (Measles, Mumps, Rubella)<br/><span class="chinese-text">éº»ç–¹ã€è…®è…ºç‚ã€é¢¨ç–¹</span></td>
<td><input class="input-field" id="vaccine2" type="date"/></td>
</tr>
<tr>
<td>BCG (Tuberculosis)<br/><span class="chinese-text">å¡ä»‹è‹—</span></td>
<td><input class="input-field" id="vaccine3" type="date"/></td>
</tr>
<tr>
<td>Meningitis ACWY<br/><span class="chinese-text">è…¦è†œç‚èŒAã€Cã€Wã€Yå‹</span></td>
<td><input class="input-field" id="vaccine4" type="date"/></td>
</tr>
<tr>
<td>Meningitis B<br/><span class="chinese-text">è…¦è†œç‚èŒBå‹</span></td>
<td><input class="input-field" id="vaccine5" type="date"/></td>
</tr>
<tr>
<td>HPV (Human Papillomavirus)<br/><span class="chinese-text">äººé¡ä¹³çªç—…æ¯’</span></td>
<td><input class="input-field" id="vaccine6" type="date"/></td>
</tr>
<tr>
<td>Pneumococcal<br/><span class="chinese-text">è‚ºç‚çƒèŒ</span></td>
<td><input class="input-field" id="vaccine7" type="date"/></td>
</tr>
</table>
</div>
<h2>Signatures and Acknowledgements ç°½ç½²åŠç¢ºèª</h2>
<h3>è²æ˜èˆ‡ç¢ºèª Declaration</h3>
<p><strong>Please tick the box to confirm acceptance è«‹åœ¨æ¯é …è²æ˜å‰æ–¹æ¡†å…§å‹¾é¸ä»¥ç¤ºç¢ºèªï¼š</strong></p>
<div class="checkbox-group">
<input id="declaration1" required="" type="checkbox"/>
<label for="declaration1">I / We have read and understood all Terms and Conditions as contained in this document including the Appendices.<br/><span class="chinese-text">æœ¬äººï¼æˆ‘å€‘å·²é–±è®€ä¸¦ç†è§£æœ¬å”è­°åŠå…¶é™„ä»¶ï¼ˆAèˆ‡Bï¼‰ä¸­çš„æ‰€æœ‰æ¢æ¬¾ã€‚</span></label>
</div>

<div class="checkbox-group">
<input id="declaration2" required="" type="checkbox"/>
<label for="declaration2">I / We have understood and completed the Parental consents section.<br/><span class="chinese-text">æœ¬äººï¼æˆ‘å€‘å·²äº†è§£ä¸¦å®Œæ•´å¡«å¯«äº†å®¶é•·æ‰¹å‡†ç›¸é—œéƒ¨åˆ†ã€‚</span></label>
</div>
<div class="checkbox-group">
<input id="declaration3" required="" type="checkbox"/>
<label for="declaration3">I / We agree to inform SchoolsGroup Limited UK of any changes to any information requested herein and anything which may affect the care of the student, the Agreement, and StudyNest's ability to discharge its obligations under this Agreement.<br/><span class="chinese-text">æœ¬äººï¼æˆ‘å€‘åŒæ„å¦‚æœ‰æœ¬è¡¨æ‰€è¦æ±‚çš„è³‡è¨Šè®Šæ›´ï¼Œæˆ–ä»»ä½•å¯èƒ½å½±éŸ¿è‹±å€«å­¸å±…å±¥è¡Œç…§é¡§å­¸ç”Ÿç¾©å‹™èˆ‡å”è­°å…§å®¹ä¹‹æƒ…æ³ï¼Œå°‡ä¸»å‹•å‘ŠçŸ¥ã€‚</span></label>
</div>
<div class="checkbox-group">
<input id="declaration4" required="" type="checkbox"/>
<label for="declaration4">I / We confirm that we will pay the fees in advance or on receipt of an invoice.<br/><span class="chinese-text">æœ¬äººï¼æˆ‘å€‘ç¢ºèªå°‡æå‰æ”¯ä»˜æˆ–æ–¼æ”¶åˆ°ä»˜æ¬¾é€šçŸ¥å¾Œæ”¯ä»˜ç›¸é—œè²»ç”¨ã€‚</span></label>
</div>
<div class="checkbox-group">
<input id="declaration5" required="" type="checkbox"/>
<label for="declaration5">I / We confirm that we have read and understood all the contents of Appendix A and Appendix B. The signature below confirms acceptance.<br/><span class="chinese-text">æœ¬äººï¼æˆ‘å€‘ç¢ºèªå·²é–±è®€ä¸¦ç†è§£é™„ä»¶AåŠé™„ä»¶Bçš„å…¨éƒ¨å…§å®¹ã€‚ä»¥ä¸‹ç°½å­—å³ç‚ºæ¥å—ã€‚</span></label>
</div>
<div class="checkbox-group">
<input id="declaration6" required="" type="checkbox"/>
<label for="declaration6">I / We agree that this Agreement is governed by the laws of England and Wales, and that any disputes shall be subject to the exclusive jurisdiction of the courts located in the place of StudyNest Education's registration.<br/><span class="chinese-text">æœ¬äººï¼æˆ‘å€‘åŒæ„æœ¬å”è­°å—è‹±æ ¼è˜­èˆ‡å¨çˆ¾æ–¯æ³•å¾‹ç®¡è½„ï¼Œä¸¦åŒæ„ä»»ä½•çˆ­è­°æ‡‰æäº¤è‡³è‹±å€«å­¸å±…è¨»å†Šæ‰€åœ¨åœ°å…·ç®¡è½„æ¬Šä¹‹æ³•é™¢è™•ç†ã€‚</span></label>
</div>
<div class="checkbox-group">
<input id="declaration7" required="" type="checkbox"/>
<label for="declaration7">I / We agree to abide by all obligations set out in this Agreement and undertake not to make false claims or defamatory remarks against StudyNest, its staff, host families, or agents that are unrelated to the actual care of the student.<br/><span class="chinese-text">æœ¬äººï¼æˆ‘å€‘åŒæ„éµå®ˆæœ¬å”è­°æ‰€è¼‰ä¹‹æ‰€æœ‰ç¾©å‹™ï¼Œä¸¦æ‰¿è«¾ä¸å°è‹±å€«å­¸å±…ã€å…¶è·å“¡ã€å¯„å®¿å®¶åº­æˆ–ä»£ç†äººä½œå‡ºèˆ‡å¯¦éš›ç…§é¡§å­¸ç”Ÿç„¡é—œä¹‹è™›å‡æŒ‡æ§æˆ–æ¯€æåè­½çš„è¡Œç‚ºã€‚</span></label>
</div>
<div style="margin: 30px 0; padding: 20px; background: #f0f8ff; border-radius: 10px; border-left: 5px solid #ed8936;">
<h4 style="color: #2d3748;">Declaration è²æ˜:</h4>
<p>I declare that the information provided above is true and accurate to the best of my knowledge. I understand that providing false information may affect my child's admission or enrolment. I authorize SchoolsGroup and the school to use this information to ensure proper care for my child.</p>
<p class="chinese-text">æœ¬äººè²æ˜ä¸Šè¿°è³‡æ–™å‡å±¬çœŸå¯¦ä¸”æ­£ç¢ºã€‚æ˜ç™½å¦‚æœ‰è™šå‡è³‡æ–™ï¼Œå¯èƒ½å½±éŸ¿å­©å­å…¥å­¸è³‡æ ¼ã€‚æˆæ¬Šè‹±å€«å­¸å±…åŠå­¸æ ¡ä½¿ç”¨æœ¬è³‡è¨Šä»¥ä¿éšœå­©å­å¥åº·èˆ‡å®‰å…¨ã€‚</p>
</div>

<div class="signature-section">
<h4>å®¶é•·ï¼ç›£è­·äººç°½åï¼ˆçˆ¶è¦ª Fatherï¼‰</h4>
<canvas class="signature-pad" id="fatherSignature"></canvas>
<div class="signature-controls">
<button class="btn btn-secondary" onclick="clearSignature('fatherSignature')" type="button">æ¸…é™¤ Clear</button>
</div>
<input class="input-field" id="fatherSignatureDate" placeholder="ç°½åæ—¥æœŸ Signature Date" style="margin-top: 10px;" type="text"/>
<div class="signature-status empty">âš  è«‹å®Œæˆç°½å Please complete signature</div>
</div>
<div class="signature-section">
<h4>å®¶é•·ï¼ç›£è­·äººç°½åï¼ˆæ¯è¦ª Motherï¼‰</h4>
<canvas class="signature-pad" id="motherSignature"></canvas>
<div class="signature-controls">
<button class="btn btn-secondary" onclick="clearSignature('motherSignature')" type="button">æ¸…é™¤ Clear</button>
</div>
<input class="input-field" id="motherSignatureDate" placeholder="ç°½åæ—¥æœŸ Signature Date" style="margin-top: 10px;" type="text"/>
<div class="signature-status empty">âš  è«‹å®Œæˆç°½å Please complete signature</div>
</div>
<div class="signature-section">
<h4>StudyNest Education ä»£è¡¨ç°½å</h4>
<div style="text-align: center; padding: 20px; background: white; border: 2px solid #ddd; border-radius: 8px;">
<div class="elegant-signature">Jessie Chang</div>
<p><strong>StudyNest Education Representative</strong></p>
<p>Date: <span id="companySignatureDate"></span></p>
</div>
<!-- æ„Ÿè°¢æ–‡å­— -->
<div style="margin-top: 25px; padding: 20px; background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-radius: 10px; border-left: 5px solid #28a745; text-align: center;">
<h4 style="color: #28a745; margin-bottom: 15px; font-size: 1.2em;">âœ… Contract Completion åˆç´„å®Œæˆ</h4>
<p style="margin-bottom: 10px; line-height: 1.6;">
Thank you for completing the online contract. Your electronic signature has been recorded. To finalise the process, please <strong>download the signed PDF</strong> and <strong>return it to StudyNest via email or messaging app</strong> for our records. No further signature is required.
</p>
<p class="chinese-text" style="margin: 0; line-height: 1.6; color: #495057;">
æ„Ÿè¬æ‚¨å®Œæˆç·šä¸Šåˆç´„å¡«å¯«ï¼Œæ‚¨çš„é›»å­ç°½åå·²æˆåŠŸè¨˜éŒ„ã€‚ç‚ºå®Œæˆæœ€çµ‚ç¨‹åºï¼Œè«‹<strong>ä¸‹è¼‰å·²ç°½ç½²çš„ PDF åˆç´„</strong>ä¸¦é€é<strong>é›»å­éƒµä»¶æˆ–é€šè¨Šè»Ÿé«”å›å‚³è‡³è‹±å€«å­¸å±…</strong>ï¼Œä»¥ä¾¿æˆ‘å€‘å­˜æª”å‚™æŸ¥ã€‚<strong>ç„¡éœ€å†æ¬¡ç°½åã€‚</strong>
</p>
</div>
</div>
<div class="final-actions">
<button class="btn btn-primary" onclick="printContract()" type="button">
                ğŸ“„ Download Signed Contract ä¸‹è¼‰å·²ç°½ç½²åˆç´„
            </button>
</div>
</div>

<script>
// æª¢æŸ¥å¿…è¦çš„å¤–éƒ¨åº«æ˜¯å¦å·²è¼‰å…¥
function checkLibraries() {
    const missingLibs = [];
    
    if (typeof window.jspdf === 'undefined') {
        missingLibs.push('jsPDF');
    }
    
    if (typeof html2canvas === 'undefined') {
        missingLibs.push('html2canvas');
    }
    
    if (missingLibs.length > 0) {
        console.error('ç¼ºå°‘å¿…è¦çš„å¤–éƒ¨åº«:', missingLibs.join(', '));
        return false;
    }
    
    return true;
}

// é›»å­ç°½ååŠŸèƒ½é¡
class SignaturePad {
    constructor(canvas) {
        this.canvas = canvas;
        this.ctx = canvas.getContext('2d');
        this.isDrawing = false;
        this.hasSignature = false;
        this.lastPos = { x: 0, y: 0 };
        
        this.setupCanvas();
        this.attachEventListeners();
    }
    
    setupCanvas() {
        // è¨­ç½®canvaså°ºå¯¸
        const rect = this.canvas.getBoundingClientRect();
        const ratio = Math.max(window.devicePixelRatio || 1, 1);
        
        this.canvas.width = rect.width * ratio;
        this.canvas.height = rect.height * ratio;
        
        this.canvas.style.width = rect.width + 'px';
        this.canvas.style.height = rect.height + 'px';
        
        this.ctx.scale(ratio, ratio);
        
        // è¨­ç½®ç¹ªè£½æ¨£å¼
        this.ctx.strokeStyle = '#2c3e50';
        this.ctx.lineWidth = 2;
        this.ctx.lineCap = 'round';
        this.ctx.lineJoin = 'round';
        this.ctx.imageSmoothingEnabled = true;
    }
    
    attachEventListeners() {
        // é¼ æ¨™äº‹ä»¶
        this.canvas.addEventListener('mousedown', (e) => this.startDrawing(e));
        this.canvas.addEventListener('mousemove', (e) => this.draw(e));
        this.canvas.addEventListener('mouseup', () => this.stopDrawing());
        this.canvas.addEventListener('mouseout', () => this.stopDrawing());
        
        // è§¸æ§äº‹ä»¶
        this.canvas.addEventListener('touchstart', (e) => this.handleTouch(e));
        this.canvas.addEventListener('touchmove', (e) => this.handleTouch(e));
        this.canvas.addEventListener('touchend', () => this.stopDrawing());
        
        // é˜²æ­¢é é¢æ»¾å‹•
        this.canvas.addEventListener('touchstart', (e) => e.preventDefault());
        this.canvas.addEventListener('touchmove', (e) => e.preventDefault());
    }
    
    getPosition(e) {
        const rect = this.canvas.getBoundingClientRect();
        return {
            x: e.clientX - rect.left,
            y: e.clientY - rect.top
        };
    }
    
    startDrawing(e) {
        this.isDrawing = true;
        this.lastPos = this.getPosition(e);
        
        // é–‹å§‹æ–°è·¯å¾‘
        this.ctx.beginPath();
        this.ctx.moveTo(this.lastPos.x, this.lastPos.y);
    }
    
    draw(e) {
        if (!this.isDrawing) return;
        
        const currentPos = this.getPosition(e);
        
        this.ctx.lineTo(currentPos.x, currentPos.y);
        this.ctx.stroke();
        
        this.lastPos = currentPos;
        this.hasSignature = true;
        this.updateStatus();
    }
    
    stopDrawing() {
        if (this.isDrawing) {
            this.isDrawing = false;
            this.ctx.beginPath(); // çµæŸç•¶å‰è·¯å¾‘
        }
    }
    
    handleTouch(e) {
        e.preventDefault();
        const touch = e.touches[0];
        const mouseEvent = new MouseEvent(
            e.type === 'touchstart' ? 'mousedown' : 'mousemove',
            {
                clientX: touch.clientX,
                clientY: touch.clientY
            }
        );
        this.canvas.dispatchEvent(mouseEvent);
    }
    
    clear() {
        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
        this.hasSignature = false;
        this.updateStatus();
    }
    
    isEmpty() {
        return !this.hasSignature;
    }
    
    getDataURL(type = 'image/png') {
        return this.canvas.toDataURL(type);
    }
    
    updateStatus() {
        const statusEl = this.canvas.parentElement.querySelector('.signature-status');
        if (statusEl) {
            if (this.hasSignature) {
                statusEl.className = 'signature-status signed';
                statusEl.textContent = 'âœ“ ç°½åå·²å®Œæˆ Signature completed';
            } else {
                statusEl.className = 'signature-status empty';
                statusEl.textContent = 'âš  è«‹å®Œæˆç°½å Please complete signature';
            }
        }
    }
}

// PDFç”Ÿæˆå’Œä¸‹è¼‰åŠŸèƒ½é¡
class ContractPDFGenerator {
    constructor() {
        this.signatures = {};
    }
    
    // åˆå§‹åŒ–æ‰€æœ‰ç°½åæ¿
    initializeSignaturePads() {
        const signatureCanvases = document.querySelectorAll('.signature-pad');
        
        signatureCanvases.forEach(canvas => {
            this.signatures[canvas.id] = new SignaturePad(canvas);
            
            // æ·»åŠ ç‹€æ…‹é¡¯ç¤ºå…ƒç´ 
            if (!canvas.parentElement.querySelector('.signature-status')) {
                const statusDiv = document.createElement('div');
                statusDiv.className = 'signature-status empty';
                statusDiv.textContent = 'âš  è«‹å®Œæˆç°½å Please complete signature';
                canvas.parentElement.appendChild(statusDiv);
            }
        });
    }
    
    // æ¸…é™¤æŒ‡å®šç°½å
    clearSignature(canvasId) {
        if (this.signatures[canvasId]) {
            this.signatures[canvasId].clear();
        }
    }
    
    // é©—è­‰è¡¨å–®å®Œæ•´æ€§
    validateForm() {
        const errors = [];
        
        try {
            // æª¢æŸ¥å¿…å¡«æ¬„ä½
            const requiredFields = [
                { id: 'parentName', name: 'å®¶é•·å§“å' },
                { id: 'parentAddress', name: 'å®¶é•·åœ°å€' },
                { id: 'studentFirstName', name: 'å­¸ç”Ÿåå­—' },
                { id: 'studentLastName', name: 'å­¸ç”Ÿå§“æ°' },
                { id: 'studentDOB', name: 'å­¸ç”Ÿå‡ºç”Ÿæ—¥æœŸ' },
                { id: 'passportNo', name: 'è­·ç…§è™Ÿç¢¼' }
            ];
            
            requiredFields.forEach(field => {
                const element = document.getElementById(field.id);
                if (!element) {
                    console.warn(`å¿…å¡«æ¬„ä½å…ƒç´ æœªæ‰¾åˆ°: ${field.id}`);
                    errors.push(`æ‰¾ä¸åˆ°æ¬„ä½: ${field.name}`);
                } else if (!element.value || !element.value.trim()) {
                    errors.push(`è«‹å¡«å¯« ${field.name}`);
                }
            });
            
            // æª¢æŸ¥æ€§åˆ¥é¸æ“‡
            const genderChecked = document.querySelector('input[name="gender"]:checked');
            if (!genderChecked) {
                errors.push('è«‹é¸æ“‡å­¸ç”Ÿæ€§åˆ¥');
            }
            
            // æª¢æŸ¥ç›£è­·æ–¹æ¡ˆé¸æ“‡
            const planChecked = document.querySelector('input[name="guardianshipPlan"]:checked');
            if (!planChecked) {
                errors.push('è«‹é¸æ“‡ç›£è­·æ–¹æ¡ˆ');
            }
            
            // æª¢æŸ¥å¿…è¦çš„å‹¾é¸é …
            const requiredCheckboxes = [
                'declaration1', 'declaration2', 'declaration3', 
                'declaration4', 'declaration5', 'declaration6', 'declaration7'
            ];
            
            requiredCheckboxes.forEach(checkboxId => {
                const checkbox = document.getElementById(checkboxId);
                if (!checkbox) {
                    console.warn(`å‹¾é¸é …ç›®å…ƒç´ æœªæ‰¾åˆ°: ${checkboxId}`);
                    errors.push(`æ‰¾ä¸åˆ°å‹¾é¸é …ç›®: ${checkboxId}`);
                } else if (!checkbox.checked) {
                    errors.push(`è«‹å‹¾é¸è²æ˜é …ç›®: ${checkboxId}`);
                }
            });
            
            // æª¢æŸ¥ç°½å
            if (this.signatures) {
                let signatureErrors = [];
                Object.keys(this.signatures).forEach(signatureId => {
                    if (this.signatures[signatureId] && this.signatures[signatureId].isEmpty()) {
                        const signatureName = signatureId.replace('Signature', '');
                        signatureErrors.push(`è«‹å®Œæˆ${signatureName}ç°½å`);
                    }
                });
                
                if (signatureErrors.length > 0) {
                    errors.push(...signatureErrors);
                }
            } else {
                errors.push('ç°½ååŠŸèƒ½å°šæœªåˆå§‹åŒ–');
            }
            
        } catch (error) {
            console.error('è¡¨å–®é©—è­‰æ™‚ç™¼ç”ŸéŒ¯èª¤:', error);
            errors.push('è¡¨å–®é©—è­‰éç¨‹ä¸­ç™¼ç”ŸéŒ¯èª¤');
        }
        
        return {
            isValid: errors.length === 0,
            errors: errors
        };
    }
    
    // ç”Ÿæˆåˆç´„ç·¨è™Ÿ
    generateContractNumber() {
        try {
            const firstNameEl = document.getElementById('studentFirstName');
            const lastNameEl = document.getElementById('studentLastName');
            const signingDateEl = document.getElementById('signingDate');
            
            if (!firstNameEl || !lastNameEl || !signingDateEl) {
                console.warn('åˆç´„ç·¨è™Ÿç”Ÿæˆï¼šå¿…è¦å…ƒç´ æœªæ‰¾åˆ°');
                return 'SN-PENDING-COMPLETION';
            }
            
            const firstName = firstNameEl.value?.trim() || '';
            const lastName = lastNameEl.value?.trim() || '';
            const signingDate = signingDateEl.value || '';
            
            if (firstName && lastName && signingDate) {
                const firstInitial = firstName.charAt(0).toUpperCase();
                const lastInitial = lastName.charAt(0).toUpperCase();
                const dateFormatted = signingDate.replace(/-/g, '');
                const randomNum = Math.floor(Math.random() * 900) + 100;
                
                const contractNumber = `SN-${firstInitial}${lastInitial}-${dateFormatted}-${randomNum}`;
                
                // æ›´æ–°é¡¯ç¤º
                const contractNumberInput = document.getElementById('contractNumberInput');
                if (contractNumberInput) {
                    contractNumberInput.value = contractNumber;
                    contractNumberInput.style.backgroundColor = '#e8f5e8';
                    contractNumberInput.style.color = '#2d5a2d';
                } else {
                    console.warn('contractNumberInput å…ƒç´ æœªæ‰¾åˆ°');
                }
                
                return contractNumber;
            }
            
            return 'SN-PENDING-COMPLETION';
        } catch (error) {
            console.error('ç”Ÿæˆåˆç´„ç·¨è™Ÿæ™‚ç™¼ç”ŸéŒ¯èª¤:', error);
            return 'SN-PENDING-COMPLETION';
        }
    }
    
    // ç”Ÿæˆä¸¦ä¸‹è¼‰PDF
    async generatePDF() {
        try {
            // æª¢æŸ¥å¤–éƒ¨åº«
            if (!checkLibraries()) {
                alert('ç³»çµ±è¼‰å…¥ä¸­ï¼Œè«‹ç¨å¾Œå†è©¦...\nSystem loading, please try again later...');
                return;
            }
            
            // é©—è­‰è¡¨å–®
            const validation = this.validateForm();
            if (!validation.isValid) {
                alert('è«‹å®Œæˆä»¥ä¸‹é …ç›®å¾Œå†ä¸‹è¼‰åˆç´„ï¼š\n\n' + validation.errors.join('\n'));
                return;
            }
            
            // ç”Ÿæˆåˆç´„ç·¨è™Ÿ
            this.generateContractNumber();
            
            // éš±è—ä¸‹è¼‰æŒ‰éˆ•
            const finalActions = document.querySelector('.final-actions');
            if (finalActions) {
                finalActions.style.display = 'none';
            }
            
            // é¡¯ç¤ºè¼‰å…¥è¨Šæ¯
            const loadingDiv = document.createElement('div');
            loadingDiv.id = 'pdf-loading';
            loadingDiv.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: white;
                padding: 30px;
                border-radius: 10px;
                box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                z-index: 10000;
                text-align: center;
                font-family: inherit;
            `;
            loadingDiv.innerHTML = `
                <div style="font-size: 18px; margin-bottom: 15px;">ğŸ“„ æ­£åœ¨ç”ŸæˆPDFåˆç´„...</div>
                <div style="font-size: 14px; color: #666;">Generating PDF contract...</div>
                <div style="margin-top: 15px;">
                    <div style="width: 200px; height: 4px; background: #f0f0f0; border-radius: 2px; overflow: hidden;">
                        <div style="width: 0%; height: 100%; background: linear-gradient(90deg, #667eea, #764ba2); border-radius: 2px; animation: progress 3s ease-in-out infinite;"></div>
                    </div>
                </div>
                <style>
                    @keyframes progress {
                        0% { width: 0%; }
                        50% { width: 70%; }
                        100% { width: 100%; }
                    }
                </style>
            `;
            document.body.appendChild(loadingDiv);
            
            // ç­‰å¾…ä¸€é»æ™‚é–“è®“UIæ›´æ–°
            await new Promise(resolve => setTimeout(resolve, 500));
            
            // ä½¿ç”¨html2canvasæ•ç²æ•´å€‹åˆç´„å…§å®¹
            const contractContainer = document.querySelector('.contract-container');
            
            const canvas = await html2canvas(contractContainer, {
                scale: 2, // é«˜å“è³ª
                useCORS: true,
                allowTaint: true,
                backgroundColor: '#ffffff',
                width: contractContainer.offsetWidth,
                height: contractContainer.offsetHeight,
                scrollX: 0,
                scrollY: 0
            });
            
            // å‰µå»ºPDF
            const { jsPDF } = window.jspdf;
            const pdf = new jsPDF({
                orientation: 'portrait',
                unit: 'mm',
                format: 'a4'
            });
            
            // è¨ˆç®—åœ–ç‰‡å°ºå¯¸ä»¥é©æ‡‰A4
            const imgWidth = 210; // A4å¯¬åº¦
            const imgHeight = (canvas.height * imgWidth) / canvas.width;
            
            // å¦‚æœå…§å®¹å¤ªé•·ï¼Œåˆ†é è™•ç†
            let heightLeft = imgHeight;
            let position = 0;
            
            // æ·»åŠ ç¬¬ä¸€é 
            pdf.addImage(canvas.toDataURL('image/jpeg', 0.95), 'JPEG', 0, position, imgWidth, imgHeight);
            heightLeft -= 297; // A4é«˜åº¦
            
            // å¦‚æœéœ€è¦åˆ†é 
            while (heightLeft >= 0) {
                position = heightLeft - imgHeight;
                pdf.addPage();
                pdf.addImage(canvas.toDataURL('image/jpeg', 0.95), 'JPEG', 0, position, imgWidth, imgHeight);
                heightLeft -= 297;
            }
            
            // ç”Ÿæˆæª”æ¡ˆåç¨±
            const contractNumber = this.generateContractNumber();
            const studentName = `${document.getElementById('studentFirstName').value}_${document.getElementById('studentLastName').value}`;
            const fileName = `StudyNest_Contract_${contractNumber}_${studentName}.pdf`;
            
            // ä¸‹è¼‰PDF
            pdf.save(fileName);
            
            // ç§»é™¤è¼‰å…¥è¨Šæ¯
            document.body.removeChild(loadingDiv);
            
            // æ¢å¾©ä¸‹è¼‰æŒ‰éˆ•
            if (finalActions) {
                finalActions.style.display = 'flex';
            }
            
            // é¡¯ç¤ºæˆåŠŸè¨Šæ¯
            const successDiv = document.createElement('div');
            successDiv.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #d4edda;
                color: #155724;
                padding: 15px 20px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                z-index: 10000;
                font-family: inherit;
                border: 1px solid #c3e6cb;
            `;
            successDiv.innerHTML = `
                <div style="font-weight: bold;">âœ… PDFåˆç´„ä¸‹è¼‰æˆåŠŸï¼</div>
                <div style="font-size: 12px; margin-top: 5px;">è«‹å°‡æª”æ¡ˆå›å‚³çµ¦StudyNest Education</div>
            `;
            document.body.appendChild(successDiv);
            
            // 3ç§’å¾Œç§»é™¤æˆåŠŸè¨Šæ¯
            setTimeout(() => {
                if (document.body.contains(successDiv)) {
                    document.body.removeChild(successDiv);
                }
            }, 3000);
            
        } catch (error) {
            console.error('PDFç”ŸæˆéŒ¯èª¤:', error);
            
            // ç§»é™¤è¼‰å…¥è¨Šæ¯
            const loadingDiv = document.getElementById('pdf-loading');
            if (loadingDiv) {
                document.body.removeChild(loadingDiv);
            }
            
            // æ¢å¾©ä¸‹è¼‰æŒ‰éˆ•
            const finalActions = document.querySelector('.final-actions');
            if (finalActions) {
                finalActions.style.display = 'flex';
            }
            
            alert('PDFç”Ÿæˆå¤±æ•—ï¼Œè«‹ç¨å¾Œé‡è©¦æˆ–è¯ç¹«æŠ€è¡“æ”¯æ´ã€‚\nPDF generation failed, please try again or contact technical support.');
        }
    }
}

// å…¨å±€å¯¦ä¾‹
let contractPDF = null;

// é é¢è¼‰å…¥å®Œæˆå¾Œåˆå§‹åŒ–
document.addEventListener('DOMContentLoaded', function() {
    try {
        // å‰µå»ºPDFç”Ÿæˆå™¨å¯¦ä¾‹
        contractPDF = new ContractPDFGenerator();
        
        // åˆå§‹åŒ–ç°½åæ¿
        contractPDF.initializeSignaturePads();
        
        // è¨­ç½®ä»Šå¤©çš„æ—¥æœŸ
        const today = new Date();
        const todayString = today.toISOString().split('T')[0];
        const todayDisplay = today.toLocaleDateString('en-GB');
        
        // å®‰å…¨åœ°è¨­ç½®æ—¥æœŸå€¼
        const signingDateEl = document.getElementById('signingDate');
        const companySignatureDateEl = document.getElementById('companySignatureDate');
        const fatherSignatureDateEl = document.getElementById('fatherSignatureDate');
        const motherSignatureDateEl = document.getElementById('motherSignatureDate');
        
        if (signingDateEl) signingDateEl.value = todayString;
        if (companySignatureDateEl) companySignatureDateEl.textContent = todayDisplay;
        if (fatherSignatureDateEl) fatherSignatureDateEl.value = todayDisplay;
        if (motherSignatureDateEl) motherSignatureDateEl.value = todayDisplay;
        
        // è‡ªå‹•åŒæ­¥å­¸ç”Ÿè³‡è¨Š
        const syncStudentInfo = () => {
            try {
                const firstNameEl = document.getElementById('studentFirstName');
                const lastNameEl = document.getElementById('studentLastName');
                const dobEl = document.getElementById('studentDOB');
                const medicalNameEl = document.getElementById('medicalName');
                const medicalDOBEl = document.getElementById('medicalDOB');
                
                const firstName = firstNameEl?.value || '';
                const lastName = lastNameEl?.value || '';
                const dob = dobEl?.value || '';
                
                if (firstName && lastName && medicalNameEl) {
                    medicalNameEl.value = `${firstName} ${lastName}`;
                }
                if (dob && medicalDOBEl) {
                    medicalDOBEl.value = dob;
                }
                
                if (contractPDF) {
                    contractPDF.generateContractNumber();
                }
            } catch (error) {
                console.error('åŒæ­¥å­¸ç”Ÿè³‡è¨Šæ™‚ç™¼ç”ŸéŒ¯èª¤:', error);
            }
        };
        
        // å®‰å…¨åœ°æ·»åŠ äº‹ä»¶ç›£è½å™¨
        const studentFirstNameEl = document.getElementById('studentFirstName');
        const studentLastNameEl = document.getElementById('studentLastName');
        const studentDOBEl = document.getElementById('studentDOB');
        const signingDateEl2 = document.getElementById('signingDate');
        
        if (studentFirstNameEl) {
            studentFirstNameEl.addEventListener('input', syncStudentInfo);
        }
        if (studentLastNameEl) {
            studentLastNameEl.addEventListener('input', syncStudentInfo);
        }
        if (studentDOBEl) {
            studentDOBEl.addEventListener('change', syncStudentInfo);
        }
        if (signingDateEl2) {
            signingDateEl2.addEventListener('change', () => {
                if (contractPDF) contractPDF.generateContractNumber();
            });
        }
        
        console.log('âœ… é é¢åˆå§‹åŒ–å®Œæˆ');
        
    } catch (error) {
        console.error('é é¢åˆå§‹åŒ–æ™‚ç™¼ç”ŸéŒ¯èª¤:', error);
    }
});

// å…¨å±€å‡½æ•¸ï¼ˆä¾›HTMLèª¿ç”¨ï¼‰
function clearSignature(canvasId) {
    try {
        if (contractPDF && contractPDF.signatures && contractPDF.signatures[canvasId]) {
            contractPDF.clearSignature(canvasId);
        } else {
            console.warn(`ç°½åæ¿ ${canvasId} æœªæ‰¾åˆ°æˆ–æœªåˆå§‹åŒ–`);
        }
    } catch (error) {
        console.error('æ¸…é™¤ç°½åæ™‚ç™¼ç”ŸéŒ¯èª¤:', error);
    }
}

function printContract() {
    try {
        if (contractPDF) {
            contractPDF.generatePDF();
        } else {
            console.error('contractPDF æœªåˆå§‹åŒ–');
            alert('ç³»çµ±å°šæœªå®Œå…¨è¼‰å…¥ï¼Œè«‹ç¨å¾Œå†è©¦');
        }
    } catch (error) {
        console.error('ç”ŸæˆPDFæ™‚ç™¼ç”ŸéŒ¯èª¤:', error);
        alert('PDFç”Ÿæˆå¤±æ•—ï¼Œè«‹ç¨å¾Œé‡è©¦æˆ–è¯ç¹«æŠ€è¡“æ”¯æ´ã€‚');
    }
}

// çª—å£å¤§å°æ”¹è®Šæ™‚é‡æ–°è¨­ç½®canvas
window.addEventListener('resize', function() {
    try {
        if (contractPDF && contractPDF.signatures) {
            setTimeout(() => {
                Object.values(contractPDF.signatures).forEach(signature => {
                    if (signature && signature.setupCanvas) {
                        signature.setupCanvas();
                    }
                });
            }, 100);
        }
    } catch (error) {
        console.error('èª¿æ•´ç•«å¸ƒå¤§å°æ™‚ç™¼ç”ŸéŒ¯èª¤:', error);
    }
});
</script>

</body>
</html>


